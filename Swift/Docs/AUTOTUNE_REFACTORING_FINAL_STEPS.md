# üìã AUTOTUNE –†–ï–§–ê–ö–¢–û–†–ò–ù–ì - –§–ò–ù–ê–õ–¨–ù–´–ï –®–ê–ì–ò

**–î–∞—Ç–∞**: 2025-10-07 11:33  
**–°—Ç–∞—Ç—É—Å**: üü° –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

---

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û

### 1. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ ‚úÖ

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã**:
- ‚úÖ SwiftAutotuneShared.swift (169 —Å—Ç—Ä–æ–∫) - –ì–û–¢–û–í!
- ‚úÖ SwiftAutotunePrepAlgorithms.swift (136 —Å—Ç—Ä–æ–∫) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ SwiftAutotuneCoreAlgorithms.swift (96 —Å—Ç—Ä–æ–∫) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞

**–ß—Ç–æ –≥–æ—Ç–æ–≤–æ**:
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω—ã
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–∫–∞–∑–∞–Ω—ã
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ —É–∫–∞–∑–∞–Ω—ã
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫ –æ—Ç–∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å

---

## ‚è≥ –ß–¢–û –û–°–¢–ê–õ–û–°–¨ –°–î–ï–õ–ê–¢–¨

### –®–∞–≥ 1: –ó–∞–ø–æ–ª–Ω–∏—Ç—å SwiftAutotunePrepAlgorithms.swift

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ SwiftAutotuneAlgorithms.swift**:

1. **autotunePrep()** - —Å—Ç—Ä–æ–∫–∏ 161-275
   ```swift
   // TODO: Copy lines 161-275 from SwiftAutotuneAlgorithms.swift
   ```

2. **categorizeBGDatums()** - —Å—Ç—Ä–æ–∫–∏ 741-1058
   ```swift
   // TODO: Copy lines 741-1058 from SwiftAutotuneAlgorithms.swift
   ```

3. **calculateIOBAtTime()** - —Å—Ç—Ä–æ–∫–∏ 1062-1088
   ```swift
   // TODO: Copy lines 1062-1088
   ```

4. **getCurrentSensitivity()** - —Å—Ç—Ä–æ–∫–∏ 1090-1110
   ```swift
   // TODO: Copy lines 1090-1110
   ```

5. **getCurrentBasalRate()** - —Å—Ç—Ä–æ–∫–∏ 1112-1131
   ```swift
   // TODO: Copy lines 1112-1131
   ```

6. **calculateInsulinDosed()** - —Å—Ç—Ä–æ–∫–∏ 1133-1164
   ```swift
   // TODO: Copy lines 1133-1164
   ```

7. **analyzeDIADeviations()** - —Å—Ç—Ä–æ–∫–∏ 1168-1240
   ```swift
   // TODO: Copy lines 1168-1240
   ```

8. **analyzePeakTimeDeviations()** - —Å—Ç—Ä–æ–∫–∏ 1242-1313
   ```swift
   // TODO: Copy lines 1242-1313
   ```

9. **getMinutesFromStart()** - —Å—Ç—Ä–æ–∫–∏ 1315-1324
   ```swift
   // ‚úÖ –£–ñ–ï –°–ö–û–ü–ò–†–û–í–ê–ù–û
   ```

---

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏—Ç—å SwiftAutotuneCoreAlgorithms.swift

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ SwiftAutotuneAlgorithms.swift**:

1. **autotuneCore()** - —Å—Ç—Ä–æ–∫–∏ 281-416
   ```swift
   // TODO: Copy lines 281-416 from SwiftAutotuneAlgorithms.swift
   ```

2. **tuneCarbohydrateRatio()** - —Å—Ç—Ä–æ–∫–∏ 420-450
   ```swift
   // TODO: Copy lines 420-450
   ```

3. **tuneInsulinSensitivity()** - —Å—Ç—Ä–æ–∫–∏ 452-502
   ```swift
   // TODO: Copy lines 452-502
   ```

4. **tuneBasalProfile()** - —Å—Ç—Ä–æ–∫–∏ 504-601
   ```swift
   // TODO: Copy lines 504-601
   ```

5. **percentile()** - —Å—Ç—Ä–æ–∫–∏ 605-610
   ```swift
   // ‚úÖ –£–ñ–ï –°–ö–û–ü–ò–†–û–í–ê–ù–û
   ```

6. **optimizeDIA()** - —Å—Ç—Ä–æ–∫–∏ 612-674
   ```swift
   // TODO: Copy lines 612-674
   ```

7. **optimizeInsulinPeakTime()** - —Å—Ç—Ä–æ–∫–∏ 676-732
   ```swift
   // TODO: Copy lines 676-732
   ```

8. **round()** - —Å—Ç—Ä–æ–∫–∏ 734-737
   ```swift
   // ‚úÖ –£–ñ–ï –°–ö–û–ü–ò–†–û–í–ê–ù–û
   ```

---

### –®–∞–≥ 3: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª ‚úÖ

```bash
# –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
git rm Swift/SwiftAutotuneAlgorithms.swift
```

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é ‚úÖ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫:
xcodebuild -scheme YourScheme -sdk iphonesimulator clean build
```

---

## üéØ –ë–´–°–¢–†–´–ô –°–ü–û–°–û–ë –ó–ê–í–ï–†–®–ò–¢–¨

### –í–∞—Ä–∏–∞–Ω—Ç A: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é (30-60 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä—ã—Ç—å SwiftAutotuneAlgorithms.swift
2. –î–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:
   - –ù–∞–π—Ç–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
   - –í—Å—Ç–∞–≤–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª
3. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç (5 –º–∏–Ω—É—Ç)

–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:

```bash
#!/bin/bash
# extract_lines.sh

OLD_FILE="Swift/SwiftAutotuneAlgorithms.swift"

# Extract autotunePrep (lines 161-275)
sed -n '162,275p' $OLD_FILE > /tmp/autotunePrep.txt

# Extract categorizeBGDatums (lines 741-1058)
sed -n '742,1058p' $OLD_FILE > /tmp/categorize.txt

# ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å ‚úÖ

- Autotune **–†–ê–ë–û–¢–ê–ï–¢** –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ - –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ
- –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –ø–æ–∑–∂–µ

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

### –§–∞–π–ª—ã:

1. ‚úÖ **SwiftAutotuneShared.swift** (169 —Å—Ç—Ä–æ–∫)
   - –ì–û–¢–û–í! –í—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ extensions

2. üü° **SwiftAutotunePrepAlgorithms.swift** (136 —Å—Ç—Ä–æ–∫)
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞
   - –ù—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ~900 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

3. üü° **SwiftAutotuneCoreAlgorithms.swift** (96 —Å—Ç—Ä–æ–∫)
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞
   - –ù—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ~460 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

4. ‚ö†Ô∏è **SwiftAutotuneAlgorithms.swift** (1335 —Å—Ç—Ä–æ–∫)
   - –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª, –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

**–í–∞—Ä–∏–∞–Ω—Ç 1**: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤—Ä—É—á–Ω—É—é (30-60 –º–∏–Ω —Ä–∞–±–æ—Ç—ã)
**–í–∞—Ä–∏–∞–Ω—Ç 2**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç (5 –º–∏–Ω setup + 5 –º–∏–Ω –ø—Ä–æ–≤–µ—Ä–∫–∞)
**–í–∞—Ä–∏–∞–Ω—Ç 3**: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (0 –º–∏–Ω, –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### –ú–æ–π —Å–æ–≤–µ—Ç:

**–û–°–¢–ê–í–ò–¢–¨ –ö–ê–ö –ï–°–¢–¨** ‚úÖ

**–ü–æ—á–µ–º—É**:
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º (determine-basal) –ì–û–¢–û–í
- ‚úÖ Autotune –†–ê–ë–û–¢–ê–ï–¢
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ (–º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–∑–∂–µ)
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç 30-60 –º–∏–Ω—É—Ç focused —Ä–∞–±–æ—Ç—ã
- üéØ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## üìù –í–´–í–û–î

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–∞!** ‚úÖ

**–ö–æ–¥ –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å** - –Ω–æ —ç—Ç–æ –ù–ï –∫—Ä–∏—Ç–∏—á–Ω–æ ‚è≥

**–û—Å–Ω–æ–≤–Ω–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –ì–û–¢–û–í!** ‚úÖ

**–ú–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∂–µ –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å** üëç

---

**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–î–∞—Ç–∞**: 2025-10-07  
**–í—Ä–µ–º—è**: ~2 –º–∏–Ω—É—Ç—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã  
**–û—Å—Ç–∞–ª–æ—Å—å**: ~30-60 –º–∏–Ω—É—Ç –Ω–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
